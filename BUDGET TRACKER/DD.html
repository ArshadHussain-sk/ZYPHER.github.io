<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BUDGET TRACKER</title>
  <link rel="stylesheet" href="DD.css">
  <link rel="icon" href="logo.jpg" type="logo/x-icon">
  <style>
    /* Add some basic styling to the loading screen */
    #loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background-color: #f0f0f0;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 48px;
      font-weight: bold;
      color: #333;
    }
  </style>
</head>
<body style="background-image:url(bg.webp);">
  <div id="loading-screen">
    <span style="color: cyan;background-color: chocolate;">ZYPHER</span>&nbsp;
    <div class="loader"></div>
  </div>

  <script>
    setTimeout(function() {
      document.getElementById("loading-screen").style.display = "none";
    }, 2000);
  </script>

  <!-- MAIN VISUAL -->
  <header>
    <h1>Budget Tracker</h1>
    <blockquote style="color:violet;">~ A budget tells us what we can't afford, but it doesn't keep us from buying it.</blockquote>
  </header>

  <section class="budget-form">
    <h2>Add Expense</h2>
    <form id="expenseForm">
      <label for="date">Date:</label>
      <input type="date" id="date" required>

      <label for="category">Category:</label>
      <select id="category">
        <option value="food">Food</option>
        <option value="transport">Transport</option>
        <option value="entertainment">Entertainment</option>
        <option value="utilities">Utilities</option>
        <option value="miscellaneous">Others</option>
      </select>

      <div id="others-input" style="display: none;">
        <label for="others-reason">Reason:</label>
        <input type="text" id="others-reason" placeholder="Enter reason">
      </div><br>

      <label for="amount">Amount (₹):</label>
      <input type="number" id="amount" placeholder="Enter amount" required>

      <button type="submit">Add Expense</button>
    </form>
  </section>

  <section class="expense-list">
    <h2>Expenses</h2>
    <div id="expenseTable">
      <table>
        <thead>
          <tr>
            <th>Date</th>
            <th>Category</th>
            <th>Amount</th>
          </tr>
        </thead>
        <tbody id="expensesBody">
        </tbody>
      </table>
    </div>
  </section>

  <section class="budget-summary">
    <h2>Monthly Summary</h2>
    <div id="summary"></div>
  </section>

  <script>
    // Load expenses from localStorage when the page loads
    document.addEventListener('DOMContentLoaded', () => {
      const expenses = loadExpenses();
      expenses.forEach(expense => {
        addExpenseToTable(expense);
      });
      updateSummary();
    });

    // Function to load expenses from localStorage
    function loadExpenses() {
      const data = localStorage.getItem('expenses');
      return data ? JSON.parse(data) : [];
    }

    // Function to save expenses to localStorage
    function saveExpenses(expenses) {
      localStorage.setItem('expenses', JSON.stringify(expenses));
    }

    // Function to add an expense to the table
    function addExpenseToTable(expense) {
      const tbody = document.getElementById('expensesBody');
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${expense.date}</td>
        <td>${expense.category}</td>
        <td>₹${expense.amount}</td>
      `;
      tbody.appendChild(row);
    }

    // Function to update the monthly summary
    function updateSummary() {
      const expenses = loadExpenses();
      const total = expenses.reduce((sum, expense) => sum + parseFloat(expense.amount), 0);
      document.getElementById('summary').textContent = `Total Expenses: ₹${total.toFixed(2)}`;
    }

    // Handle form submission
    document.getElementById('expenseForm').addEventListener('submit', (e) => {
      e.preventDefault();

      const date = document.getElementById('date').value;
      const category = document.getElementById('category').value;
      const amount = document.getElementById('amount').value;

      const expense = { date, category, amount };

      // Add expense to localStorage
      const expenses = loadExpenses();
      expenses.push(expense);
      saveExpenses(expenses);

      // Add expense to the table
      addExpenseToTable(expense);

      // Update the summary
      updateSummary();

      // Clear the form
      e.target.reset();
    });

    // Show/hide "Others" reason input
    document.getElementById('category').addEventListener('change', (e) => {
      const othersInput = document.getElementById('others-input');
      if (e.target.value === 'miscellaneous') {
        othersInput.style.display = 'block';
      } else {
        othersInput.style.display = 'none';
      }
    });
  </script>

  <p style="text-align: center;">&copy;2024 ZYPHER</p>
</body>
</html>
